!function(){var e,o,t;e={init:function(e,t,i,n,a,l,r,b,u,j){if(arguments.length<1)throw new Error("Invalid parameters !!!");return new o(e,t,i,n,a,l,r,b,u,j)},version:"0.1.0"},o=function(e,o,i,n,a,l,r,b,u,j){t=this,t.obj={},t.obj.notFittable=!1,t.obj.wrongFiles=[],t.obj.rightFiles=[],t.obj.width=o>>0,t.obj.height=i>>0,t.obj.ratio=Number((n>>0).toFixed(2)),t.obj.type=a&&a.match(/jpg|jpeg|gif|png/)?String(a):"",t.obj.volume=l,t.obj.useBins=!!r,t.obj.bins=[],t.obj.successFunc=b,t.obj.failedFunc=u,t.obj.renderFunc=j,t.obj.acceptType=[],t.obj.useValidate=!1,t.obj.validateType=[],"string"==typeof t.obj.volume&&t.obj.volume.match(/^\d+/)?t.obj.volume.match(/kb$/i)?t.obj.volume=1024*(t.obj.volume.match(/\d+/)[0]>>0):t.obj.volume.match(/mb$/i)?t.obj.volume=1024*(t.obj.volume.match(/\d+/)[0]>>0)*1024:t.obj.volume.match(/gb$/i)?t.obj.volume=1024*(t.obj.volume.match(/\d+/)[0]>>0)*1024*1024:t.obj.volume=t.obj.volume.match(/\d+/)[0]>>0:t.obj.volume=t.obj.volume>>0,t.obj.ratio?(t.obj.useValidate=!0,t.obj.validateType.push("ratio")):(t.obj.width||t.obj.height)&&(t.obj.useValidate=!0,t.obj.validateType.push("size")),t.obj.volume&&(t.obj.useValidate=!0,t.obj.validateType.push("volume")),t.obj.type&&(t.obj.acceptType=t.obj.type.match(/jpg|jpeg|gif|png/g),t.obj.validateType.push("type"),t.obj.acceptType.includes("jpg")&&!t.obj.acceptType.includes("jpeg")&&t.obj.acceptType.push("jpeg")),t.readFiles(e)},o.prototype.addEvent=function(e,o,t){var i,n,a,l;for(l=function(e){var o=e||window.event;return o.target||(o.target=o.srcElement),o.preventDefault||(o.preventDefault=function(){o.returnValue=!1,o.defaultPrevented=!0}),t.call(this,o)},o=o.split(" "),n=0,a=o.length;a>n;n++)i=o[n],e.addEventListener?e.addEventListener(i,t,!1):e.attachEvent("on"+i,l)},o.prototype.readFiles=function(e){var o=new FileReader;if(o){var i,n;i=e.files,n=function(a){var l,r,b;a>=i.length||(l=i[a],r=/^image.*$/,b={},b.fileName=l.name,b.fileType=l.type,b.fileVolume=l.size,b.errorType=null,b.width=0,b.height=0,b.ratio=0,b.image=null,r.test(l.type)||(t.obj.wrongFiles.push(b),t.obj.notFittable=!0,b.errorType="type",a===i.length-1&&(e.value=null,"function"==typeof t.obj.failedFunc&&t.obj.failedFunc(t.obj.rightFiles,t.obj.wrongFiles))),o.onload=function(o){var l,r;l=document.createElement("div"),r=document.createElement("img"),r.src=o.target.result,r.onload=function(){var o,n,l;o=this.width,n=this.height,l=Number((n/o).toFixed(2)),fileExtension=b.fileType.replace(/^image\//,""),b.width=o,b.height=n,b.ratio=l,b.image=r,t.obj.validateType.includes("volume")&&t.obj.volume&&b.fileVolume>t.obj.volume&&(b.errorType="volume")||t.obj.validateType.includes("ratio")&&t.obj.ratio&&l!==t.obj.ratio&&(b.errorType="ratio")||t.obj.validateType.includes("size")&&t.obj.width&&t.obj.height&&(o!==t.obj.width||n!==t.obj.height)&&(b.errorType="size")||t.obj.validateType.includes("type")&&t.obj.type&&!t.obj.acceptType.includes(fileExtension)&&(b.errorType="type")?(t.obj.wrongFiles.push(b),t.obj.notFittable=!0):(t.obj.rightFiles.push(b),t.obj.useBins&&t.appendFile(e,a,!1)),"function"==typeof t.obj.renderFunc?t.obj.renderFunc(r):e.insertAdjacentElement("afterend",r),a===i.length-1&&(t.obj.notFittable?(e.value=null,"function"==typeof t.obj.failedFunc&&t.obj.failedFunc(t.obj.rightFiles,t.obj.wrongFiles)):"function"==typeof t.obj.successFunc&&(t.obj.useBins?t.appendFile(e,a,!0):t.obj.successFunc(t.obj.rightFiles,t.obj.wrongFiles)))},n(a+1)},o.readAsDataURL(l))},n(0)}},o.prototype.appendFile=function(e,o,i){var n,a,l;n=new FileReader,a=e.files,i?"function"==typeof t.obj.successFunc&&t.obj.successFunc(t.obj.rightFiles,t.obj.wrongFiles,t.obj.bins):(l=function(e){var o=a[e];n.onload=function(e){var o=e.target.result;t.obj.bins.push(o)},n.readAsBinaryString(o)})(o)},window.imagePreview=e}();